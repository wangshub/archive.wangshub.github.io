<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="神奇的战士"><link rel=prev href=https://wangshub.github.io/posts/%E5%9C%A8github%E4%B8%8A%E7%9C%8B%E5%88%B0%E8%BF%87%E7%9A%84%E6%9C%80%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E9%A1%B9%E7%9B%AE/><link rel=next href=https://wangshub.github.io/posts/%E6%A0%91%E8%8E%93%E6%B4%BEfm%E5%B0%8F%E7%94%B5%E5%8F%B0%E8%83%8C%E5%90%8E%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/><link rel=canonical href=https://wangshub.github.io/posts/%E7%94%A8python%E7%BB%99%E6%8A%96%E9%9F%B3%E5%B0%8F%E5%A7%90%E5%A7%90%E6%89%93%E5%A3%B0%E6%8B%9B%E5%91%BC/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>用Python给抖音小姐姐打声招呼 | 🍉 神奇的战士</title><meta name=title content="用Python给抖音小姐姐打声招呼 | 🍉 神奇的战士"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/wangshub.github.io"},"articleSection":"posts","name":"用Python给抖音小姐姐打声招呼","headline":"用Python给抖音小姐姐打声招呼","description":"用 Python 自动给抖音小姐姐评论一个 666 前一段时间写了一篇 《抖音 Python 机器人，论如何在抖音上找到漂亮小姐姐？》，没想到有相当多的同学有着相同的需求！\u0008 大家","inLanguage":"zh-cn","author":"神奇的战士","creator":"神奇的战士","publisher":"神奇的战士","accountablePerson":"神奇的战士","copyrightHolder":"神奇的战士","copyrightYear":"2019","datePublished":"2019-02-20 17:04:28 \u002b0000 UTC","dateModified":"2019-02-20 17:04:28 \u002b0000 UTC","url":"https:\/\/wangshub.github.io\/posts\/%E7%94%A8python%E7%BB%99%E6%8A%96%E9%9F%B3%E5%B0%8F%E5%A7%90%E5%A7%90%E6%89%93%E5%A3%B0%E6%8B%9B%E5%91%BC\/","wordCount":"669","keywords":["Python","Douyin","ADB","🍉 神奇的战士"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://wangshub.github.io><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://wangshub.github.io>🍉 神奇的战士</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/about/><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">用Python给抖音小姐姐打声招呼</h1><div class=post-meta>Written by <a itemprop=name href=https://wangshub.github.io rel=author>神奇的战士</a> with ♥
<span class=post-time>on <time datetime=2019-02-20 itemprop=datePublished>February 20, 2019</time></span>
in
<span class=post-word-count>669 words</span></div></header><div class=post-content><h1 id=用-python-自动给抖音小姐姐评论一个-666>用 Python 自动给抖音小姐姐评论一个 666</h1><p>前一段时间写了一篇 <a href=https://zhuanlan.zhihu.com/p/37365182>《抖音 Python 机器人，论如何在抖音上找到漂亮小姐姐？》</a>，没想到有相当多的同学有着相同的需求！</p><p>大家皆为</p><img src=https://raw.githubusercontent.com/wangshub/image-hosting/master/img20190220191539.png><p>程序的基本思路请见 <a href=https://github.com/wangshub/Douyin-Bot#%E5%8E%9F%E7%90%86>原理与使用教程</a></p><p>当程序在抖音上刷到一个漂亮小姐姐的时候就会自动点赞加关注</p><img src=https://github.com/wangshub/Douyin-Bot/raw/master/screenshot/auto_reply.gif width=280/><p>作为一个闷骚程序员，见到漂亮小姐姐总是在<strong>背后默默点赞加关注</strong>。</p><p>但是鲁迅曾经说过 <code>喜欢就要大声说出来！</code></p><p>于是我又给脚本加上了这么一个<strong>自动评论</strong>的功能</p><img src=https://raw.githubusercontent.com/wangshub/image-hosting/master/img20190220191645.png width=280/><h2 id=自动评论实现步骤>自动评论实现步骤</h2><p>查阅 ADB 文档， <code>adb shell input text "hello,world"</code> 命令可直接将字符串输入到 Android App 的输入框中，但是仅支持 ASICC 字符，也就是不能够输入中文字符。好在 <a href=https://github.com/senzhk/ADBKeyBoard>senzhk</a> 写了一个 ADB 虚拟键盘输入法，通过监听 ADB 广播事件接收 ADB 发送的 Unicode 编码字符串，然后输入到文本框中，可以绕过这个限制。</p><p><strong>操作步骤</strong></p><ul><li><p>安卓手机安装 <a href=https://github.com/wangshub/Douyin-Bot/blob/master/apk/ADBKeyBoard.apk>ADBKeyBoard.apk</a></p></li><li><p>将手机默认输入法切换为 <code>ADB KeyBoard</code></p><p><img src=https://raw.githubusercontent.com/wangshub/image-hosting/master/img20190220195516.png width=240></p></li><li><p>手机连上电脑，在输入框输入 <code>adb shell am broadcast -a ADB_INPUT_TEXT --es msg '可爱小姐姐你好呀'</code> 即可输入中文字符；</p></li></ul><h2 id=代码实现>代码实现</h2><p>完整代码请参考 <a href=https://github.com/wangshub/Douyin-Bot>wangshub/Douyin-Bot</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>auto_reply</span>():
    msg <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;垆边人似月，皓腕凝霜雪。就在刚刚，我的心动了一下，小姐姐你好可爱呀_Powered_By_Python&#34;</span>
    tap(config[<span style=color:#e6db74>&#39;comment_bottom&#39;</span>][<span style=color:#e6db74>&#39;x&#39;</span>], config[<span style=color:#e6db74>&#39;comment_bottom&#39;</span>][<span style=color:#e6db74>&#39;y&#39;</span>])
    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
    tap(config[<span style=color:#e6db74>&#39;comment_text&#39;</span>][<span style=color:#e6db74>&#39;x&#39;</span>], config[<span style=color:#e6db74>&#39;comment_text&#39;</span>][<span style=color:#e6db74>&#39;y&#39;</span>])
    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
    cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;shell am broadcast -a ADB_INPUT_TEXT --es msg {text}&#39;</span><span style=color:#f92672>.</span>format(text<span style=color:#f92672>=</span>msg)
    adb<span style=color:#f92672>.</span>run(cmd)
    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
    tap(config[<span style=color:#e6db74>&#39;comment_send&#39;</span>][<span style=color:#e6db74>&#39;x&#39;</span>], config[<span style=color:#e6db74>&#39;comment_send&#39;</span>][<span style=color:#e6db74>&#39;y&#39;</span>])
    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>0.5</span>)
    cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;shell input keyevent 4&#39;</span>
    adb<span style=color:#f92672>.</span>run(cmd)
</code></pre></div><h2 id=存在的问题>存在的问题</h2><ul><li><input disabled type=checkbox> ADB 不支持 Unicode 编码，所以需要用 ADB KeyBoard 操作比较繁琐；</li><li><input disabled type=checkbox> 再者 ADB 是对屏幕坐标点击，存在屏幕分辨率适配的硬伤；</li><li><input disabled type=checkbox> 针对上面的两个问题，可以使用 App 自动化测试工具 <a href=http://appium.io/>Appium</a> 解决，后面再找机会把坑填上；</li></ul><h2 id=总结>总结</h2><p>小孩子不要玩抖音 ！小孩子不要玩抖音！
太耗时间了，每天在安装了又卸载，卸载了又安装的 Loop 中循环 O_O</p><blockquote><p>送人一赞，手留余香 🌹
作者：神奇的战士 <a href=https://github.com/wangshub>https://github.com/wangshub</a>
欢迎关注我的公众号【神奇的战士】，期待跟你分享有趣的代码 ~</p></blockquote><p><img src=https://ws1.sinaimg.cn/large/c3a916a7gy1fs09ydtc98j20vd06p759.jpg alt></p></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>神奇的战士</span></p><p class=copyright-item><span>Link:</span>
<a href=https://wangshub.github.io/posts/%E7%94%A8python%E7%BB%99%E6%8A%96%E9%9F%B3%E5%B0%8F%E5%A7%90%E5%A7%90%E6%89%93%E5%A3%B0%E6%8B%9B%E5%91%BC/>https://wangshub.github.io/posts/%E7%94%A8python%E7%BB%99%E6%8A%96%E9%9F%B3%E5%B0%8F%E5%A7%90%E5%A7%90%E6%89%93%E5%A3%B0%E6%8B%9B%E5%91%BC/</span></p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://wangshub.github.io/tags/python/>#Python</a></span>
<span class=tag><a href=https://wangshub.github.io/tags/douyin/>#Douyin</a></span>
<span class=tag><a href=https://wangshub.github.io/tags/adb/>#ADB</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://wangshub.github.io>home</a></span></section></div><div class=post-nav><a href=https://wangshub.github.io/posts/%E5%9C%A8github%E4%B8%8A%E7%9C%8B%E5%88%B0%E8%BF%87%E7%9A%84%E6%9C%80%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E9%A1%B9%E7%9B%AE/ class=prev rel=prev title=在GitHub上看到过的最有意思的项目><i class="iconfont icon-left"></i>&nbsp;在GitHub上看到过的最有意思的项目</a>
<a href=https://wangshub.github.io/posts/%E6%A0%91%E8%8E%93%E6%B4%BEfm%E5%B0%8F%E7%94%B5%E5%8F%B0%E8%83%8C%E5%90%8E%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/ class=next rel=next title=树莓派FM小电台背后的原理解析>树莓派FM小电台背后的原理解析&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://wangshub.github.io>神奇的战士</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span></div></footer><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage();</script><script>MathJax={tex:{inlineMath:[["$","$"]],},displayMath:[["$$","$$"],["\[\[","\]\]"],],svg:{fontCache:"global",},};</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></div></body></html>