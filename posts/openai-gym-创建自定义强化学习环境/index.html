<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="ç¥å¥‡çš„æˆ˜å£«"><link rel=prev href=https://wangshub.github.io/posts/%E6%88%91%E7%9A%84%E5%9B%A2%E9%95%BF%E6%88%91%E7%9A%84%E5%9B%A2%E4%B9%A6%E6%91%98/><link rel=next href=https://wangshub.github.io/posts/pybulet-gym%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E5%8F%8C%E8%B6%B3%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A8%A1%E5%9E%8Bhumanoidpybulletenv-v0/><link rel=canonical href=https://wangshub.github.io/posts/openai-gym-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>OpenAI Gym æºç é˜…è¯»:åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ | ğŸ‰ ç¥å¥‡çš„æˆ˜å£«</title><meta name=title content="OpenAI Gym æºç é˜…è¯»:åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ | ğŸ‰ ç¥å¥‡çš„æˆ˜å£«"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/wangshub.github.io"},"articleSection":"posts","name":"OpenAI Gym æºç é˜…è¯»:åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ","headline":"OpenAI Gym æºç é˜…è¯»:åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ","description":"OpenAI Gym æºç é˜…è¯»ï¼šåˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ Gym ä»‹ç» Gym æ˜¯ä¸€å¥—å¼€å‘å¼ºåŒ–å­¦ä¹ ç®—æ³•çš„å·¥å…·ç®±ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—å†…ç½®çš„ç¯å¢ƒï¼Œç»“åˆå¼ºåŒ–å­¦ä¹ ç®—æ³•å°±å¯ä»¥å¯¹å†…ç½®çš„ç¯å¢ƒè¿›è¡Œæ±‚","inLanguage":"zh-cn","author":"ç¥å¥‡çš„æˆ˜å£«","creator":"ç¥å¥‡çš„æˆ˜å£«","publisher":"ç¥å¥‡çš„æˆ˜å£«","accountablePerson":"ç¥å¥‡çš„æˆ˜å£«","copyrightHolder":"ç¥å¥‡çš„æˆ˜å£«","copyrightYear":"2019","datePublished":"2019-08-21 16:24:35 \u002b0000 UTC","dateModified":"2019-08-21 16:24:35 \u002b0000 UTC","url":"https:\/\/wangshub.github.io\/posts\/openai-gym-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83\/","wordCount":"680","keywords":["Reinforcement Learning","Python","ğŸ‰ ç¥å¥‡çš„æˆ˜å£«"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://wangshub.github.io><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://wangshub.github.io>ğŸ‰ ç¥å¥‡çš„æˆ˜å£«</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/about/><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">OpenAI Gym æºç é˜…è¯»:åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ</h1><div class=post-meta>Written by <a itemprop=name href=https://wangshub.github.io rel=author>ç¥å¥‡çš„æˆ˜å£«</a> with â™¥
<span class=post-time>on <time datetime=2019-08-21 itemprop=datePublished>August 21, 2019</time></span>
in
<span class=post-word-count>680 words</span></div></header><div class=post-content><h1 id=openai-gym-æºç é˜…è¯»åˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ>OpenAI Gym æºç é˜…è¯»ï¼šåˆ›å»ºè‡ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ</h1><h2 id=gym-ä»‹ç»>Gym ä»‹ç»</h2><p><a href=https://gym.openai.com/>Gym</a> æ˜¯ä¸€å¥—å¼€å‘å¼ºåŒ–å­¦ä¹ ç®—æ³•çš„å·¥å…·ç®±ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—<a href=https://gym.openai.com/docs/#environments>å†…ç½®çš„ç¯å¢ƒ</a>ï¼Œç»“åˆå¼ºåŒ–å­¦ä¹ ç®—æ³•å°±å¯ä»¥å¯¹å†…ç½®çš„ç¯å¢ƒè¿›è¡Œæ±‚è§£ã€‚</p><div style=text-align:center><img src=https://raw.githubusercontent.com/wangshub/image-hosting/master/img/20190821145807.png width=60%></div><p>ä¾‹å¦‚ï¼Œè°ƒç”¨ <code>CartPole-v0</code> ç¯å¢ƒçš„ç¤ºä¾‹å¦‚ä¸‹</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> gym
env <span style=color:#f92672>=</span> gym<span style=color:#f92672>.</span>make(<span style=color:#e6db74>&#39;CartPole-v0&#39;</span>)
<span style=color:#66d9ef>for</span> i_episode <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>20</span>):
    observation <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>reset()
    <span style=color:#66d9ef>for</span> t <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>100</span>):
        env<span style=color:#f92672>.</span>render()
        <span style=color:#66d9ef>print</span>(observation)
        action <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>action_space<span style=color:#f92672>.</span>sample()
        observation, reward, done, info <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>step(action)
        <span style=color:#66d9ef>if</span> done:
            <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;Episode finished after {} timesteps&#34;</span><span style=color:#f92672>.</span>format(t<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>))
            <span style=color:#66d9ef>break</span>
env<span style=color:#f92672>.</span>close()
</code></pre></div><p>Gym ä»¿çœŸä¸»è¦åŒ…æ‹¬</p><ul><li>å¯¼å…¥ç¯å¢ƒ <code>gym.make('CartPole-v0')</code></li><li>åˆå§‹åŒ–ç¯å¢ƒ <code>env.reset()</code>ï¼Œå°†å¼ºåŒ–å­¦ä¹ ç¯å¢ƒè®¾ç½®ä¸ºåˆå§‹çŠ¶æ€</li><li>ä¸€æ­¥ä»¿çœŸ <code>env.step(action)</code>ï¼Œè¾“å…¥åŠ¨ä½œï¼Œè·å¾—ç¯å¢ƒåé¦ˆ</li><li>æ¸²æŸ“å¯è§†åŒ–å½“å‰çŠ¶æ€ <code>env.render()</code></li></ul><p>è™½ç„¶ Gym å†…ç½®äº†å¤§é‡å¼ºåŒ–å­¦ä¹ ç¯å¢ƒï¼Œå¦‚æœæƒ³è®­ç»ƒè‡ªå®šä¹‰çš„å¼ºåŒ–å­¦ä¹ é—®é¢˜ï¼Œå°±å¿…é¡»è¦åˆ›å»ºè‡ªå®šä¹‰çš„å¼ºåŒ–å­¦ä¹ ç¯å¢ƒã€‚</p><h2 id=æºç è§£æ>æºç è§£æ</h2><p>æ ¹æ®ä¸Šä¸€èŠ‚çš„ Gym ä¸»è¦å‡½æ•°è°ƒç”¨æ¥å£ï¼Œ<a href=https://github.com/openai/gym/blob/master/gym/envs/classic_control/cartpole.py>CartPoleEnv</a> ç»§æ‰¿äº†åŸºç±» <a href=https://github.com/openai/gym/blob/master/gym/core.py>gym.Env</a>ï¼Œé‡Œé¢å®šä¹‰äº†ä¸»è¦çš„ API æ–¹æ³•</p><ul><li>step</li><li>reset</li><li>render</li><li>close</li><li>seed</li></ul><p>åˆ›å»ºäº†è‡ªå®šä¹‰çš„ç¯å¢ƒï¼Œéœ€è¦ç”± <a href=https://github.com/openai/gym/blob/master/gym/envs/__init__.py>gym/envs/<strong>init</strong>.py</a> è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œ <code>id</code> åï¼ŒæŒ‡å®šè·¯å¾„ <code>gym.envs.classic_control:CartPoleEnv</code> å’Œå…¶ä»–å‚æ•°ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> gym.envs.registration <span style=color:#f92672>import</span> registry, register, make, spec

register(
    id<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;CartPole-v0&#39;</span>,
    entry_point<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;gym.envs.classic_control:CartPoleEnv&#39;</span>,
    max_episode_steps<span style=color:#f92672>=</span><span style=color:#ae81ff>200</span>,
    reward_threshold<span style=color:#f92672>=</span><span style=color:#ae81ff>195.0</span>,
)
</code></pre></div><p>åœ¨ <a href=https://github.com/openai/gym/blob/master/gym/envs/registration.py#L150>gym/envs/registration.py</a> å®ä¾‹åŒ–äº† 1 ä¸ªå…¨å±€çš„ <code>registry = EnvRegistry()</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Have a global registry</span>
registry <span style=color:#f92672>=</span> EnvRegistry()
</code></pre></div><p>åœ¨ <a href=https://github.com/openai/gym/blob/master/gym/envs/registration.py>gym/envs/registration.py</a> ä¸­æ ¹æ® <code>entry_point</code> å®ä¾‹åŒ–ç¯å¢ƒ <code>env</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make</span>(self, <span style=color:#f92672>**</span>kwargs):
        <span style=color:#e6db74>&#34;&#34;&#34;Instantiates an instance of the environment with appropriate kwargs&#34;&#34;&#34;</span>
        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>entry_point <span style=color:#f92672>is</span> None:
            <span style=color:#66d9ef>raise</span> error<span style=color:#f92672>.</span>Error(<span style=color:#e6db74>&#39;Attempting to make deprecated env {}. (HINT: is there a newer registered version of this env?)&#39;</span><span style=color:#f92672>.</span>format(self<span style=color:#f92672>.</span>id))
        _kwargs <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_kwargs<span style=color:#f92672>.</span>copy()
        _kwargs<span style=color:#f92672>.</span>update(kwargs)
        <span style=color:#66d9ef>if</span> callable(self<span style=color:#f92672>.</span>entry_point):
            env <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>entry_point(<span style=color:#f92672>**</span>_kwargs)
        <span style=color:#66d9ef>else</span>:
            cls <span style=color:#f92672>=</span> load(self<span style=color:#f92672>.</span>entry_point)
            env <span style=color:#f92672>=</span> cls(<span style=color:#f92672>**</span>_kwargs)

        <span style=color:#75715e># Make the enviroment aware of which spec it came from.</span>
        env<span style=color:#f92672>.</span>unwrapped<span style=color:#f92672>.</span>spec <span style=color:#f92672>=</span> self

        <span style=color:#66d9ef>return</span> env
</code></pre></div><p>æ‰€ä»¥ï¼Œæ€»ç»“ä¸€ä¸‹ï¼Œå¦‚æœå¸Œæœ›å¯¼å…¥è‡ªå®šä¹‰ç¯å¢ƒçš„è¯ï¼Œåªéœ€è¦åœ¨è‡ªå®šä¹‰çš„ <code>package</code> ä¸­æ³¨å†Œ idï¼Œå¹¶æŒ‡å®šè‡ªå®šä¹‰ Env ç±»çš„è·¯å¾„</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> gym.envs.registration <span style=color:#f92672>import</span> register

register(
    id<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;custom-env-name&#39;</span>,
    entry_point<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;path.to:CusEnvClassName&#39;</span>,
)
</code></pre></div><p>ç„¶åè°ƒç”¨ <code>gym.make('custom-env-name')</code> å°±èƒ½å¯¼å…¥è‡ªå®šä¹‰çš„ç¯å¢ƒ</p><h2 id=åˆ›å»ºè‡ªå®šä¹‰ç¯å¢ƒ>åˆ›å»ºè‡ªå®šä¹‰ç¯å¢ƒ</h2><p>æ ¹æ®ä¸Šé¢æ³¨å†Œç¯å¢ƒçš„æµç¨‹åˆ†æï¼Œå¯çŸ¥ï¼Œè¦å¼•å…¥è‡ªå®šä¹‰ç¯å¢ƒï¼Œä¸å¿…æ”¹åŠ¨ Gym çš„æºç ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ª Python æ¨¡å— å³å¯ã€‚ç›®å½•ç»“æ„è§£é‡Šå¦‚ä¸‹</p><div style=text-align:center><img src=https://raw.githubusercontent.com/wangshub/image-hosting/master/img/20190821161511.png width=80%></div><p>ä¸ºäº†æ–¹ä¾¿è°ƒè¯•è°ƒç”¨ï¼Œä»¥ <code>pip install -e .</code> å®‰è£…è‡ªå®šä¹‰æ¨¡å—ã€‚æµ‹è¯•ä»£ç ä¸­ï¼Œå¼•å…¥æ¨¡å—æ—¶ï¼Œå³å¯å°†è‡ªå®šä¹‰ç¯å¢ƒæ³¨å†Œåˆ° Gym ç¯å¢ƒä¸­ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> gym
<span style=color:#f92672>import</span> gym_foo
env <span style=color:#f92672>=</span> gym<span style=color:#f92672>.</span>make(<span style=color:#e6db74>&#39;foo-v0&#39;</span>)
</code></pre></div><h2 id=è‡ªå®šä¹‰ç¯å¢ƒæ¨¡å—å‚è€ƒä»£ç >è‡ªå®šä¹‰ç¯å¢ƒæ¨¡å—å‚è€ƒä»£ç </h2><ul><li><a href=https://github.com/wangshub/Tic-Tac-Toe-Gym_Environment>apoddar573/Tic-Tac-Toe-Gym_Environment</a></li><li><a href=https://github.com/benelot/pybullet-gym>PyBullet Gymperium</a></li></ul><h2 id=å‚è€ƒ>å‚è€ƒ</h2><ul><li><a href=https://github.com/apoddar573/Tic-Tac-Toe-Gym_Environment>Tic-Tac-Toe-Gym_Environment</a></li><li><a href=https://towardsdatascience.com/creating-a-custom-openai-gym-environment-for-stock-trading-be532be3910e>Create custom gym environments from scratch â€” A stock market example</a></li><li><a href=https://github.com/benelot/pybullet-gym>pybullet-gym</a></li></ul></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>ç¥å¥‡çš„æˆ˜å£«</span></p><p class=copyright-item><span>Link:</span>
<a href=https://wangshub.github.io/posts/openai-gym-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/>https://wangshub.github.io/posts/openai-gym-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83/</span></p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://wangshub.github.io/tags/reinforcement-learning/>#Reinforcement Learning</a></span>
<span class=tag><a href=https://wangshub.github.io/tags/python/>#Python</a></span></section><section><a href=javascript:window.history.back();>back</a></span> Â·
<span><a href=https://wangshub.github.io>home</a></span></section></div><div class=post-nav><a href=https://wangshub.github.io/posts/%E6%88%91%E7%9A%84%E5%9B%A2%E9%95%BF%E6%88%91%E7%9A%84%E5%9B%A2%E4%B9%A6%E6%91%98/ class=prev rel=prev title=ã€Šæˆ‘çš„å›¢é•¿æˆ‘çš„å›¢ã€‹ä¹¦æ‘˜><i class="iconfont icon-left"></i>&nbsp;ã€Šæˆ‘çš„å›¢é•¿æˆ‘çš„å›¢ã€‹ä¹¦æ‘˜</a>
<a href=https://wangshub.github.io/posts/pybulet-gym%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E5%8F%8C%E8%B6%B3%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A8%A1%E5%9E%8Bhumanoidpybulletenv-v0/ class=next rel=next title="Pybulet Gym æºç è§£æï¼šåŒè¶³æœºå™¨äººæ¨¡å‹ HumanoidPyBulletEnv-v0">Pybulet Gym æºç è§£æï¼šåŒè¶³æœºå™¨äººæ¨¡å‹ HumanoidPyBulletEnv-v0&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://wangshub.github.io>ç¥å¥‡çš„æˆ˜å£«</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span></div></footer><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage();</script><script>MathJax={tex:{inlineMath:[["$","$"]],},displayMath:[["$$","$$"],["\[\[","\]\]"],],svg:{fontCache:"global",},};</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></div></body></html>