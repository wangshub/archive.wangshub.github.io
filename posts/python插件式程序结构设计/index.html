<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta name=author content="ç¥å¥‡çš„æˆ˜å£«">
<link rel=prev href=https://wangshub.github.io/posts/cerebro%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%94%B5%E5%BD%B1%E7%A3%81%E5%8A%9B%E6%90%9C%E7%B4%A2%E7%A5%9E%E5%99%A8/>
<link rel=next href=https://wangshub.github.io/posts/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%88%AC%E8%99%AB/>
<link rel=canonical href=https://wangshub.github.io/posts/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
<title>
Pythonæ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡ | ğŸ‰ ç¥å¥‡çš„æˆ˜å£«
</title>
<meta name=title content="Pythonæ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡ | ğŸ‰ ç¥å¥‡çš„æˆ˜å£«">
<link rel=stylesheet href=/css/main.min.css>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/wangshub.github.io"},"articleSection":"posts","name":"Pythonæ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡","headline":"Pythonæ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡","description":"Python æ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡ å°å§å§ï¼Œä½ çš„æ’ä»¶æ‰äº† æœ¬æ–‡æºç åœ¨ github\/wangshub æœ€è¿‘æœ‰ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œæˆ‘ç»å¸¸ä¼šé‡åˆ°\u0008å¯¹ä»¥å‰çš„ç¨‹åºæˆ–è€…ä»£ç è¿›è¡ŒåŠŸèƒ½çš„\u0008æ‰©å……ï¼Œä½†æ˜¯ç”±äºå‰","inLanguage":"zh-cn","author":"ç¥å¥‡çš„æˆ˜å£«","creator":"ç¥å¥‡çš„æˆ˜å£«","publisher":"ç¥å¥‡çš„æˆ˜å£«","accountablePerson":"ç¥å¥‡çš„æˆ˜å£«","copyrightHolder":"ç¥å¥‡çš„æˆ˜å£«","copyrightYear":"2018","datePublished":"2018-04-23 14:27:19 \u002b0000 UTC","dateModified":"2018-04-23 14:27:19 \u002b0000 UTC","url":"https:\/\/wangshub.github.io\/posts\/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1\/","wordCount":"728","keywords":["Python","ğŸ‰ ç¥å¥‡çš„æˆ˜å£«"]}</script>
</head>
<body>
<div class=wrapper>
<nav class=navbar>
<progress class=content_progress max=0 value=0></progress>
<div class=container>
<div class="navbar-header header-back2home-logo">
<span class=logo_mark>>$</span>
<a href=https://wangshub.github.io>
<span class=logo_text>cd /home/</span>
<span class=logo_cursor></span>
</a>
</div>
<div class=navbar-right>
<span class=menu>
<a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a>
</span>
</div>
</div>
</nav>
<nav class=navbar-mobile id=nav-mobile style=display:none>
<progress class=content_progress max=0 value=0></progress>
<div class=container>
<div class=navbar>
<div class="navbar-header header-logo">
<a href=https://wangshub.github.io>ğŸ‰ ç¥å¥‡çš„æˆ˜å£«</a>
</div>
<div class=navbar-right>
<div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div>
<div class=menu-toggle>
<span></span><span></span><span></span>
</div>
</div>
</div>
<div class=menu id=mobile-menu>
<nav class=mb-md>
<a class=menu-item href=/posts/ title>
<h3>Blog</h3>
<div class=menu-active></div>
</a>
<a class=menu-item href=/categories/ title>
<h3>Categories</h3>
<div class=menu-active></div>
</a>
<a class=menu-item href=/tags/ title>
<h3>Tags</h3>
<div class=menu-active></div>
</a>
<a class=menu-item href=/about/ title>
<h3>About</h3>
<div class=menu-active></div>
</a>
</nav>
</div>
</div>
</nav>
<main class=main>
<div class=container>
<article class=post-warp itemscope itemtype=http://schema.org/Article>
<header class=post-header>
<h1 class=post-title itemprop="name headline">Pythonæ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡</h1>
<div class=post-meta>
Written by <a itemprop=name href=https://wangshub.github.io rel=author>ç¥å¥‡çš„æˆ˜å£«</a> with â™¥
<span class=post-time>
on <time datetime=2018-04-23 itemprop=datePublished>April 23, 2018</time>
</span>
in
<span class=post-word-count>728 words</span>
</div>
</header>
<div class=post-content>
<h1 id=python-æ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡>Python æ’ä»¶å¼ç¨‹åºç»“æ„è®¾è®¡</h1>
<blockquote>
<p>å°å§å§ï¼Œä½ çš„æ’ä»¶æ‰äº†</p>
</blockquote>
<p>æœ¬æ–‡æºç åœ¨ <a href=github/wangshub>github/wangshub</a></p>
<p>æœ€è¿‘æœ‰ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œæˆ‘ç»å¸¸ä¼šé‡åˆ°å¯¹ä»¥å‰çš„ç¨‹åºæˆ–è€…ä»£ç è¿›è¡ŒåŠŸèƒ½çš„æ‰©å……ï¼Œä½†æ˜¯ç”±äºå‰æœŸæ²¡æœ‰å¤ªå¤šç¨‹åºæ¶æ„ä¸Šçš„è®¾è®¡ï¼Œå¯¼è‡´åŠŸèƒ½æ‰©å……æ—¶å†—ä½™ä»£ç å¤ªå¤šï¼Œè€Œä¸”ä¸æ–¹ä¾¿ç»´æŠ¤( YC åˆ›å§‹äºº Paul Graham å…¶å®æ¨èè¿™ç§åšæ³•ï¼Œäº§å“å¿«é€Ÿä¸Šçº¿ï¼Œè·å–ç”¨æˆ·åé¦ˆè¿›è¡Œä¿®æ”¹)ã€‚</p>
<p>çŸ¥åçš„æ’ä»¶å¼è®¾è®¡çš„é¡¹ç›®æœ‰</p>
<ul>
<li>Emacs</li>
<li>Vs-code</li>
<li>Atom</li>
</ul>
<p>ä¸ºäº†æ‹“å±•è½¯ä»¶çš„åŠŸèƒ½ï¼Œç»å¸¸ä¼šå°†è½¯ä»¶è®¾è®¡æˆæ’ä»¶å¼ç»“æ„ï¼Œæ‰€ä»¥å°±ä»æˆ‘ç†Ÿæ‚‰çš„ Python å¼€å§‹äº†è§£è¿™éƒ¨åˆ†çŸ¥è¯†ã€‚
é€šè¿‡ Googleï¼Œ å‘ç°äº† <a href=http://pluginbase.pocoo.org/>Pluginbase</a> Python æ’ä»¶æ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿå®ç°ä¸€ä¸ª Python æ’ä»¶å¼ç»“æ„ï¼Œè¿™ç¯‡åšå®¢ä½œä¸ºé˜…è¯»ç¬”è®°ã€‚</p>
<h2 id=é¡¹ç›®æ–‡ä»¶ç»“æ„>é¡¹ç›®æ–‡ä»¶ç»“æ„</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell>â”œâ”€â”€ app1
â”‚   â””â”€â”€ plugins
â”‚       â””â”€â”€ secret.py
â”œâ”€â”€ app2
â”‚   â””â”€â”€ plugins
â”‚       â””â”€â”€ randomstr.py
â”œâ”€â”€ builtin_plugins
â”‚   â”œâ”€â”€ lowercase.py
â”‚   â””â”€â”€ uppercase.py
â””â”€â”€ example.py
</code></pre></div><h2 id=æ’ä»¶ç®¡ç†å™¨>æ’ä»¶ç®¡ç†å™¨</h2>
<ul>
<li>è·å–å½“å‰é¡¹ç›®çš„è·¯å¾„</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#f92672>import</span> os
<span style=color:#f92672>from</span> functools <span style=color:#f92672>import</span> partial
<span style=color:#f92672>from</span> pluginbase <span style=color:#f92672>import</span> PluginBase


<span style=color:#75715e># For easier usage calculate the path relative to here.</span>
here <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>abspath(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>dirname(__file__))
<span style=color:#75715e># å‡½æ•°åŒ…è£…ï¼Œé‡æ–°å®šä¹‰å‡½æ•°ç­¾åï¼Œå‡å°‘è°ƒç”¨å‚æ•°</span>
get_path <span style=color:#f92672>=</span> partial(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join, here)
print(<span style=color:#e6db74>&#39;here:&#39;</span>, here)
print(<span style=color:#e6db74>&#39;get_path:&#39;</span>, get_path)

<span style=color:#75715e># Setup a plugin base for &#34;example.modules&#34; and make sure to load</span>
<span style=color:#75715e># all the default built-in plugins from the builtin_plugins folder.</span>
plugin_base <span style=color:#f92672>=</span> PluginBase(package<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;example.plugins&#39;</span>,
                         searchpath<span style=color:#f92672>=</span>[get_path(<span style=color:#e6db74>&#39;./builtin_plugins&#39;</span>)])


<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Application</span>(object):
    <span style=color:#e6db74>&#34;&#34;&#34;Represents a simple example application.&#34;&#34;&#34;</span>

    <span style=color:#66d9ef>def</span> __init__(self, name):
        <span style=color:#75715e># Each application has a name</span>
        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name

        <span style=color:#75715e># And a dictionary where it stores &#34;formatters&#34;.  These will be</span>
        <span style=color:#75715e># functions provided by plugins which format strings.</span>
        self<span style=color:#f92672>.</span>formatters <span style=color:#f92672>=</span> {}

        <span style=color:#75715e># and a source which loads the plugins from the &#34;{app_name}/plugins&#34;</span>
        <span style=color:#75715e># folder.  We also pass the application name as identifier.  This</span>
        <span style=color:#75715e># is optional but by doing this out plugins have consistent</span>
        <span style=color:#75715e># internal module names which allows pickle to work.</span>
        self<span style=color:#f92672>.</span>source <span style=color:#f92672>=</span> plugin_base<span style=color:#f92672>.</span>make_plugin_source(
            searchpath<span style=color:#f92672>=</span>[get_path(<span style=color:#e6db74>&#39;./</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>/plugins&#39;</span> <span style=color:#f92672>%</span> name)],
            identifier<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>name)

        <span style=color:#75715e># Here we list all the plugins the source knows about, load them</span>
        <span style=color:#75715e># and the use the &#34;setup&#34; function provided by the plugin to</span>
        <span style=color:#75715e># initialize the plugin.</span>
        <span style=color:#66d9ef>for</span> plugin_name <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>source<span style=color:#f92672>.</span>list_plugins():
            plugin <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>source<span style=color:#f92672>.</span>load_plugin(plugin_name)
            plugin<span style=color:#f92672>.</span>setup(self)

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>register_formatter</span>(self, name, formatter):
        <span style=color:#e6db74>&#34;&#34;&#34;A function a plugin can use to register a formatter.&#34;&#34;&#34;</span>
        self<span style=color:#f92672>.</span>formatters[name] <span style=color:#f92672>=</span> formatter
</code></pre></div><h2 id=å®ç°æ’ä»¶>å®ç°æ’ä»¶</h2>
<h3 id=æ’ä»¶-1--app1>æ’ä»¶ 1 ï¼š App1</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#f92672>import</span> string


<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_secret</span>(s):
    chars <span style=color:#f92672>=</span> list(s)
    <span style=color:#66d9ef>for</span> idx, char <span style=color:#f92672>in</span> enumerate(chars):
        <span style=color:#66d9ef>if</span> char <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> string<span style=color:#f92672>.</span>punctuation <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> char<span style=color:#f92672>.</span>isspace():
            chars[idx] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;x&#39;</span>
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(chars)


<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>setup</span>(app):
    app<span style=color:#f92672>.</span>register_formatter(<span style=color:#e6db74>&#39;secret&#39;</span>, make_secret)

</code></pre></div><h3 id=æ’ä»¶-2--app2>æ’ä»¶ 2 ï¼š App2</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#f92672>import</span> random
<span style=color:#f92672>import</span> string


<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_random</span>(s):
    chars <span style=color:#f92672>=</span> list(s)
    <span style=color:#66d9ef>for</span> idx, char <span style=color:#f92672>in</span> enumerate(chars):
        <span style=color:#66d9ef>if</span> char <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> string<span style=color:#f92672>.</span>punctuation <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> char<span style=color:#f92672>.</span>isspace():
            chars[idx] <span style=color:#f92672>=</span> random<span style=color:#f92672>.</span>choice(string<span style=color:#f92672>.</span>ascii_letters)
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>join(chars)


<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>setup</span>(app):
    app<span style=color:#f92672>.</span>register_formatter(<span style=color:#e6db74>&#39;random&#39;</span>, make_random)
</code></pre></div><h3 id=å†…ç½®æ’ä»¶>å†…ç½®æ’ä»¶</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_lowercase</span>(s):
    <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span>lower()


<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>setup</span>(app):
    app<span style=color:#f92672>.</span>register_formatter(<span style=color:#e6db74>&#39;lowercase&#39;</span>, make_lowercase)
</code></pre></div><h2 id=è°ƒç”¨ä½ çš„æ’ä»¶>è°ƒç”¨ä½ çš„æ’ä»¶</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run_demo</span>(app, source):
    <span style=color:#e6db74>&#34;&#34;&#34;Shows all formatters in demo mode of an application.&#34;&#34;&#34;</span>
    print(<span style=color:#e6db74>&#39;Formatters for </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>:&#39;</span> <span style=color:#f92672>%</span> app<span style=color:#f92672>.</span>name)
    print(<span style=color:#e6db74>&#39;       input: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> source)
    <span style=color:#66d9ef>for</span> name, fmt <span style=color:#f92672>in</span> sorted(app<span style=color:#f92672>.</span>formatters<span style=color:#f92672>.</span>items()):
        print(<span style=color:#e6db74>&#39;  </span><span style=color:#e6db74>%10s</span><span style=color:#e6db74>: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> (name, fmt(source)))
    print(<span style=color:#e6db74>&#39;&#39;</span>)
</code></pre></div><h2 id=ç›¸å…³å‚è€ƒé“¾æ¥>ç›¸å…³å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href=http://hgoldfish.com/blogs/article/81/>å¦‚ä½•è®¾è®¡æ’ä»¶å¼ç»“æ„çš„ç¨‹åºï¼Œå…¼è°ˆPythonè¯­è¨€çš„åŠ¨æ€æ€§</a></li>
<li><a href=https://github.com/wangshub/pluginbase>A simple but flexible plugin system for Python.</a></li>
<li><a href=https://docs.python.org/3/tutorial/classes.html>Python Classes</a></li>
<li><a href=http://www.wklken.me/posts/2013/08/18/python-extra-functools.html>PYTHON-è¿›é˜¶-FUNCTOOLSæ¨¡å—å°ç»“</a></li>
</ul>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span>Author:</span>
<span>ç¥å¥‡çš„æˆ˜å£« </span>
</p>
<p class=copyright-item>
<span>Link:</span>
<a href=https://wangshub.github.io/posts/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/>https://wangshub.github.io/posts/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/</span>
</p>
</div>
<div class=post-tags>
<section>
<i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://wangshub.github.io/tags/python/>
#Python</a></span>
</section>
<section>
<a href=javascript:window.history.back();>back</a></span> Â·
<span><a href=https://wangshub.github.io>home</a></span>
</section>
</div>
<div class=post-nav>
<a href=https://wangshub.github.io/posts/cerebro%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%94%B5%E5%BD%B1%E7%A3%81%E5%8A%9B%E6%90%9C%E7%B4%A2%E7%A5%9E%E5%99%A8/ class=prev rel=prev title=Cerebroæ’ä»¶ä¹‹ç”µå½±ç£åŠ›æœç´¢ç¥å™¨><i class="iconfont icon-left"></i>&nbsp;Cerebroæ’ä»¶ä¹‹ç”µå½±ç£åŠ›æœç´¢ç¥å™¨</a>
<a href=https://wangshub.github.io/posts/python%E6%8F%92%E4%BB%B6%E5%BC%8F%E7%88%AC%E8%99%AB/ class=next rel=next title=pythonæ’ä»¶å¼çˆ¬è™«>pythonæ’ä»¶å¼çˆ¬è™«&nbsp;<i class="iconfont icon-right"></i></a>
</div>
<div class=post-comment>
</div>
</article>
</div>
</main>
<footer class=footer>
<div class=copyright>
&copy;
<span itemprop=copyrightYear>2016 - 2021</span>
<span class=with-love>
<i class="iconfont icon-love"></i>
</span>
<span class=author itemprop=copyrightHolder><a href=https://wangshub.github.io>ç¥å¥‡çš„æˆ˜å£«</a> | </span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span>
</div>
</footer>
<script defer src=/js/vendor_main.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script>
<script>pangu.spacingPage()</script>
</div>
</body>
</html>